(function(e){function t(t){for(var r,o,l=t[0],n=t[1],i=t[2],u=0,b=[];u<l.length;u++)o=l[u],Object.prototype.hasOwnProperty.call(c,o)&&c[o]&&b.push(c[o][0]),c[o]=0;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);d&&d(t);while(b.length)b.shift()();return a.push.apply(a,i||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],r=!0,l=1;l<s.length;l++){var n=s[l];0!==c[n]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=s[0]))}return e}var r={},c={app:0},a=[];function o(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=r,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(s,r,function(t){return e[t]}.bind(null,r));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],n=l.push.bind(l);l.push=t,l=l.slice();for(var i=0;i<l.length;i++)t(l[i]);var d=n;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"56d7":function(e,t,s){"use strict";s.r(t);var r=s("7a23");const c=Object(r["f"])("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css",integrity:"sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==",crossorigin:"anonymous",referrerpolicy:"no-referrer"},null,-1),a={class:"space-x-4 sm:flex mb-4"},o=Object(r["f"])("div",null,null,-1),l={class:"w-1/4 rounded-md bg-yellow-600 text-white font-semibold py-3 px-6"},n={class:"w-3/4 rounded-md border-2 border-yellow-600 py-3 px-6"},i=Object(r["f"])("div",null,null,-1);function d(e,t,s,d,u,b){const m=Object(r["w"])("Header"),h=Object(r["w"])("Sidebar"),p=Object(r["w"])("router-view");return Object(r["r"])(),Object(r["e"])(r["a"],null,[c,Object(r["h"])(m),Object(r["f"])("div",a,[o,Object(r["f"])("div",l,[Object(r["h"])(h)]),Object(r["f"])("div",n,[Object(r["h"])(p)]),i])],64)}const u={class:"text-center bg-yellow-600 text-white p-4 mb-8 grid grid-cols-3 gap-2"},b={class:"place-self-center text-3xl font-bold"},m=Object(r["f"])("i",{class:"fas fa-link"}," ",-1),h=Object(r["g"])("Dream CRM appli"),p={key:0,class:"place-self-center"},O={key:1,class:"place-self-center"},j={key:2,class:"place-self-center"},f=Object(r["g"])("Login"),g={key:3,class:"place-self-center"},y=Object(r["g"])("Logout");function v(e,t,s,c,a,o){const l=Object(r["w"])("router-link");return Object(r["r"])(),Object(r["e"])("header",u,[Object(r["f"])("div",b,[Object(r["h"])(l,{to:"/"},{default:Object(r["E"])(()=>[m,h]),_:1})]),"loggedIn"==e.status?(Object(r["r"])(),Object(r["e"])("div",p," Menu Connected ")):Object(r["d"])("",!0),""==e.status||"error_login"==e.status?(Object(r["r"])(),Object(r["e"])("div",O," Menu not connected ")):Object(r["d"])("",!0),Object(r["g"])(" "+Object(r["y"])(e.status)+" ",1),"loggedIn"!=e.status?(Object(r["r"])(),Object(r["e"])("div",j,[Object(r["h"])(l,{to:"/login"},{default:Object(r["E"])(()=>[f]),_:1})])):Object(r["d"])("",!0),"loggedIn"==e.status||"loading"==e.status?(Object(r["r"])(),Object(r["e"])("div",g,[Object(r["h"])(l,{to:"/",onClick:o.logout},{default:Object(r["E"])(()=>[y]),_:1},8,["onClick"])])):Object(r["d"])("",!0)])}var w=s("5502"),x={name:"Header",computed:{...Object(w["b"])(["status"])},methods:{logout(){this.$store.commit("logout")}}};x.render=v;var C=x;const k={class:"w-1/4"},M={class:"text-white text-lg"},F={class:"m-4"},S=Object(r["g"])("Home"),A={class:"m-4"},U=Object(r["g"])("Customer");function E(e,t,s,c,a,o){const l=Object(r["w"])("router-link");return Object(r["r"])(),Object(r["e"])("div",k,[Object(r["f"])("ul",M,[Object(r["f"])("li",F,[Object(r["h"])(l,{"active-class":"text-lg text-yellow-200",class:"hover:text-lg hover:text-yellow-200",to:"/"},{default:Object(r["E"])(()=>[S]),_:1})]),Object(r["f"])("li",A,[Object(r["h"])(l,{"active-class":"text-lg text-yellow-200",class:"hover:text-lg hover:text-yellow-200",to:"/customer"},{default:Object(r["E"])(()=>[U]),_:1})])])])}var _={name:"Sidebar"};_.render=E;var $=_,I={components:{Header:C,Sidebar:$},mounted(){}};I.render=d;var q=I,L=s("6c02");const N={key:0},D={key:1},B={key:2};function T(e,t,s,c,a,o){return Object(r["r"])(),Object(r["e"])(r["a"],null,[o.userConnected?(Object(r["r"])(),Object(r["e"])("div",N," Welcome "+Object(r["y"])(e.user.firstName)+"! ",1)):Object(r["d"])("",!0),o.userConnected?Object(r["d"])("",!0):(Object(r["r"])(),Object(r["e"])("div",D," You are not connected (status : "+Object(r["y"])(e.status)+") ",1)),Object(r["f"])("button",{onClick:t[0]||(t[0]=(...e)=>o.myInfos&&o.myInfos(...e)),class:"m-4 bg-yellow-600 text-white rounded-lg shadow-lg px-2 py-2 hover:bg-yellow-700"}," Get my Infos "),""!=a.dataUser?(Object(r["r"])(),Object(r["e"])("div",B,Object(r["y"])(a.dataUser),1)):Object(r["d"])("",!0)],64)}var P={name:"Home",data(){return{TBD:"",dataUser:""}},components:{},computed:{...Object(w["b"])(["user","status"]),userConnected(){return-1!=this.user._id}},methods:{myInfos(){this.$store.dispatch("myInfos").then(e=>{console.log("Home.vue response : ",e),this.dataUser=e},e=>{console.error("Home.vue something is wrong : ",e)})}},mounted(){}};P.render=T;var V=P;const H={key:0,class:"ml-8"},z={class:"mt-4 w-1/2"},J=Object(r["f"])("div",{class:"text-yellow-800 text-xl"},"Log in",-1),R={class:"text-gray-500 text-right text-sm"},W=Object(r["g"])("No Account yet?"),Z={key:0,type:"button",class:"inline-flex items-center px-4 py-2 font-semibold leading-6 text-sm shadow rounded-md text-white bg-yellow-600 hover:bg-yellow-800 transition ease-in-out duration-150 cursor-not-allowed",disabled:""},G=Object(r["f"])("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[Object(r["f"])("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),Object(r["f"])("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Q=Object(r["g"])(" Loading... "),X=[G,Q],Y={class:"mt-4"},K=Object(r["f"])("label",{class:"block left-1 -top-2 text-gray-500 text-sm"},"Username",-1),ee={key:0,class:"mt-4"},te={class:"flex flex-auto items-center"},se=Object(r["f"])("div",{class:"ml-14 text-sm"},null,-1),re=Object(r["f"])("label",{class:"block left-1 -top-2 text-gray-500 text-sm"},"Password",-1),ce={key:0},ae=Object(r["g"])("Forgot?"),oe={key:1,class:"mt-4"},le={role:"alert"},ne={class:"grid grid-cols-2 bg-red-500 text-white font-bold rounded-t px-2 py-1"},ie=Object(r["f"])("div",{class:""},"Error",-1),de=Object(r["f"])("div",{class:"border border-t-0 border-red-400 rounded-b bg-red-100 px-2 py-2 text-red-700 text-sm"},[Object(r["f"])("p",null,"Bad credentials, please try again.")],-1),ue={key:2,class:"mt-4 mb-4"},be=["disabled"],me={key:0},he={key:1},pe={key:1,class:"ml-8"},Oe=Object(r["f"])("br",null,null,-1),je=Object(r["g"])(" Wanna quit : "),fe={key:2,class:"ml-8"},ge={class:"mt-4 w-1/2"},ye=Object(r["f"])("div",{class:"text-yellow-800 text-xl"},"Create an Account",-1),ve={class:"text-gray-500 text-right text-sm"},we=Object(r["g"])("Already an Account?"),xe={ref:"create",class:"flex flex-col w-1/2 place-items-center mt-4 rounded border border-yellow-600"},Ce={class:"mt-4"},ke=Object(r["f"])("label",{class:"block left-1 -top-2 text-gray-500 text-sm"},"First Name",-1),Me={class:"mt-4"},Fe=Object(r["f"])("label",{class:"required block left-1 -top-2 text-gray-500 text-sm"},"Last Name",-1),Se={class:"mt-4"},Ae=Object(r["f"])("label",{class:"block left-1 -top-2 text-gray-500 text-sm"},"Username",-1),Ue={class:"mt-4"},Ee={class:"flex flex-auto items-center"},_e=Object(r["f"])("label",{class:"block left-1 -top-2 text-gray-500 text-sm"},"Password",-1),$e={class:"mt-4"},Ie=Object(r["f"])("label",{class:"block left-1 -top-2 text-gray-500 text-sm"},"Confirm Password",-1),qe={key:0,class:"mt-4"},Le={class:"mt-4 mb-4"},Ne=["disabled"];function De(e,t,s,c,a,o){const l=Object(r["w"])("router-link");return Object(r["r"])(),Object(r["e"])(r["a"],null,[Object(r["g"])(Object(r["y"])(a.mode)+" et "+Object(r["y"])(e.status)+" ",1),"login"!==a.mode||""!=e.status&&"error_login"!=e.status?Object(r["d"])("",!0):(Object(r["r"])(),Object(r["e"])("div",H,[Object(r["f"])("div",z,[J,Object(r["f"])("div",R,[W,Object(r["f"])("button",{class:"bg-white hover:bg-yellow-100 text-yellow-800 ml-2 py-1 px-1 border border-yellow-600 rounded shadow",onClick:t[0]||(t[0]=(...e)=>o.switchToCreateAccount&&o.switchToCreateAccount(...e))}," Create an Account")])]),"login"===a.mode&&"loading"==e.status?(Object(r["r"])(),Object(r["e"])("button",Z,X)):Object(r["d"])("",!0),Object(r["f"])("form",{onChange:t[5]||(t[5]=(...e)=>o.change&&o.change(...e)),ref:"login",class:"flex flex-col w-1/2 place-items-center mt-4 rounded border border-yellow-600"},[Object(r["f"])("div",Y,[K,Object(r["F"])(Object(r["f"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.username=e),required:"",class:Object(r["n"])([a.focusMedium,"py-2 text-sm rounded-md px-2 text-gray-800"])},null,2),[[r["B"],a.username,void 0,{trim:!0}]])]),"login"===a.mode?(Object(r["r"])(),Object(r["e"])("div",ee,[Object(r["f"])("div",te,[se,Object(r["f"])("div",null,[re,Object(r["F"])(Object(r["f"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.password=e),type:"password",required:"",class:Object(r["n"])([a.focusMedium,"py-2 text-sm rounded-md px-2 text-gray-800"])},null,2),[[r["B"],a.password,void 0,{trim:!0}]])]),"login"===a.mode?(Object(r["r"])(),Object(r["e"])("div",ce,[Object(r["h"])(l,{class:"ml-2 text-sm text-yellow-600",to:"/forgot"},{default:Object(r["E"])(()=>[ae]),_:1})])):Object(r["d"])("",!0)])])):Object(r["d"])("",!0),"login"===a.mode&&"error_login"==e.status&&a.first?(Object(r["r"])(),Object(r["e"])("div",oe,[Object(r["f"])("div",le,[Object(r["f"])("div",ne,[ie,Object(r["f"])("div",{onClick:t[3]||(t[3]=(...e)=>o.change&&o.change(...e)),class:"text-right cursor-pointer"},"X")]),de])])):Object(r["d"])("",!0),"login"===a.mode?(Object(r["r"])(),Object(r["e"])("div",ue,[Object(r["f"])("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>o.login&&o.login(...e)),disabled:o.formInvalid,class:"disabled:opacity-30 rounded mt-4 px-2 py-1 text-gray-100 bg-yellow-600 hover:bg-yellow-700"},[""==e.status||"error_login"==e.status||"error_create"==e.status?(Object(r["r"])(),Object(r["e"])("span",me,"Login")):Object(r["d"])("",!0),"loading"==e.status?(Object(r["r"])(),Object(r["e"])("span",he,"Login in progress...")):Object(r["d"])("",!0)],8,be)])):Object(r["d"])("",!0)],544)])),"login"==a.mode&&"loggedIn"==e.status?(Object(r["r"])(),Object(r["e"])("div",pe,[Object(r["g"])(Object(r["y"])(e.user.firstName)+", you're already logged in",1),Oe,je,Object(r["f"])("button",{onClick:t[6]||(t[6]=(...e)=>o.logout&&o.logout(...e)),class:"bg-white hover:bg-yellow-100 text-yellow-800 ml-2 py-1 px-1 border border-yellow-600 rounded shadow"},"Logout")])):Object(r["d"])("",!0),"create"===a.mode?(Object(r["r"])(),Object(r["e"])("div",fe,[Object(r["f"])("div",ge,[ye,Object(r["f"])("div",ve,[we,Object(r["f"])("button",{class:"bg-white hover:bg-yellow-100 text-yellow-800 ml-2 py-1 px-1 border border-yellow-600 rounded shadow",onClick:t[7]||(t[7]=(...e)=>o.switchToLogin&&o.switchToLogin(...e))}," Login")])]),Object(r["f"])("form",xe,[Object(r["f"])("div",Ce,[ke,Object(r["F"])(Object(r["f"])("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>a.firstName=e),class:Object(r["n"])([a.focusMedium,"py-2 text-sm rounded-md px-2 text-gray-800"]),ref:"firstName"},null,2),[[r["B"],a.firstName,void 0,{trim:!0}]])]),Object(r["f"])("div",Me,[Fe,Object(r["F"])(Object(r["f"])("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>a.lastName=e),required:"",class:Object(r["n"])([a.focusMedium,"py-2 text-sm rounded-md px-2 text-gray-800"]),ref:"lastName"},null,2),[[r["B"],a.lastName,void 0,{trim:!0}]])]),Object(r["f"])("div",Se,[Ae,Object(r["F"])(Object(r["f"])("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>a.username=e),required:"",class:Object(r["n"])([a.focusMedium,"py-2 text-sm rounded-md px-2 text-gray-800"])},null,2),[[r["B"],a.username,void 0,{trim:!0}]])]),Object(r["f"])("div",Ue,[Object(r["f"])("div",Ee,[Object(r["f"])("div",null,[_e,Object(r["F"])(Object(r["f"])("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>a.password=e),type:"password",required:"",class:Object(r["n"])([a.focusMedium,"py-2 text-sm rounded-md px-2 text-gray-800"])},null,2),[[r["B"],a.password,void 0,{trim:!0}]])])])]),Object(r["f"])("div",$e,[Ie,Object(r["F"])(Object(r["f"])("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>a.password2=e),type:"password",required:"",class:Object(r["n"])([a.focusMedium,"py-2 text-sm rounded-md px-2 text-gray-800"])},null,2),[[r["B"],a.password2,void 0,{trim:!0}]])]),a.displayMessageCreate?(Object(r["r"])(),Object(r["e"])("div",qe,Object(r["y"])(a.messageCreate),1)):Object(r["d"])("",!0),Object(r["f"])("div",Le,[Object(r["f"])("button",{type:"button",onClick:t[13]||(t[13]=(...e)=>o.createUser&&o.createUser(...e)),disabled:o.formInvalid,class:"disabled:opacity-30 rounded mt-4 px-2 py-1 text-gray-100 bg-yellow-600 hover:bg-yellow-700"},"Create User",8,Ne)])],512)])):Object(r["d"])("",!0)],64)}var Be=s("bc3a"),Te=s.n(Be);const Pe="/api/users",Ve="/api/users/meta";class He{static async getUsersMeta(){try{const e=await Te.a.get(Ve);return e.data}catch(e){return console.log("UserService getUsersMeta error : "+e),e}}static async updateUsersMeta(e){try{const t=await Te.a.put(Ve,e);return t.data}catch(t){return console.log("UserService getUsersMeta error : "+t),t}}static async insertUsersMeta(e){try{const t=await Te.a.post(Ve,e);return t.data}catch(t){return console.log("UserService getUsersMeta error : "+t),t}}static async getUsers(){try{const e=await Te.a.get(Pe);return e.data}catch(e){return console.log("UserService getUsers error : "+e),e}}static async getUser(e){try{const t=await Te.a.get(`${Pe}/${e}`);return t.data}catch(t){return console.log("UserService getUsers error : "+t),t}}static async insertUser(e){return Te.a.post(Pe,e)}static async updateUser(e,t){return Te.a.put(`${Pe}/${e}`,t)}static async deleteUser(e){return Te.a.delete(`${Pe}/${e}`)}}var ze=He,Je={name:"Login",components:{},data(){return{focusMedium:"focus:outline-none border border-gray-300 focus:border-yellow-600 focus:ring-0",mode:"login",username:"",password:"",password2:"",firstName:"",lastName:"",first:!1,messageCreate:"",displayMessageCreate:!1,statusCreate:!1}},mounted(){},computed:{formInvalid(){return("create"!=this.mode||""==this.lastName||""==this.username||""==this.password||""==this.password2||this.password!=this.password2)&&("login"!=this.mode||""==this.username||""==this.password)},...Object(w["b"])(["user","status"])},methods:{change(){this.first=!1},login(){this.first=!0,this.$store.dispatch("login",{username:this.username,password:this.password}).then(e=>{console.log("Login.vue -- Connected user : ",this.username)}).catch(e=>{console.log("Login.vue Error : ",e)})},logout(){this.$store.commit("logout")},switchToCreateAccount(){this.mode="create"},switchToLogin(){this.mode="login"},async createUser(){let e={username:this.username,password:this.password,firstName:this.firstName,lastName:this.lastName};if(this.password.length<=6&&(this.messageCreate="Your password must contain more than 6 characters!",this.password=this.password2=""),this.password==this.password2&&this.password.length>6){try{await ze.insertUser(e),this.messageCreate="User "+this.username+" created successfully!",this.statusCreate=!0}catch(t){this.messageCreate="User not created, this username already exists!"}this.password=this.password2=""}this.displayMessageCreate=!0}}};Je.render=De;var Re=Je;function We(e,t,s,c,a,o){return Object(r["r"])(),Object(r["e"])("div",null," Forgot ? ")}var Ze={name:"Forgot",components:{},created(){}};Ze.render=We;var Ge=Ze;function Qe(e,t,s,c,a,o){return Object(r["r"])(),Object(r["e"])("div",null," Account ")}var Xe={name:"Account",components:{},created(){}};Xe.render=Qe;var Ye=Xe;const Ke={class:"relative mb-4"},et=Object(r["f"])("span",{class:"absolute inset-y-0 left-0 flex items-center pl-2"},[Object(r["f"])("svg",{fill:"none",stroke:"orange","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",class:"w-6 h-6"},[Object(r["f"])("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1),tt=Object(r["g"])("Edit Customer Structure"),st=Object(r["f"])("i",{class:"fas fa-plus-circle text-white mr-2"},null,-1),rt=Object(r["g"])("Create a Customer "),ct=[st,rt],at={class:"inline-flex ml-8 mr-2 bg-yellow-600 text-white rounded-lg shadow-lg px-2 py-2 hover:bg-yellow-700"},ot=Object(r["f"])("svg",{class:"animate-spin mr-2 h-auto w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[Object(r["f"])("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),Object(r["f"])("path",{class:"opacity-100",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),lt=Object(r["g"])(" Loading... "),nt=[ot,lt],it={class:"rounded-t-md shadow-lg overflow-hidden"},dt={id:"customers"},ut={class:"px-3 py-2"},bt=["value"],mt=["set"],ht=["onClick"],pt=["onClick"],Ot=["colspan"],jt={key:0,class:"text-red-600"},ft={class:"container"},gt={class:"mt-8 mb-6 grid grid-cols-3 gap-8"},yt=["set"],vt=["for"],wt=["required","id","value"],xt={class:"flex items-stretch"},Ct=Object(r["f"])("button",{class:"disabled:opacity-50 disabled:cursor-not-allowed rounded ml-4 px-2 py-1 text-gray-100 bg-blue-600 hover:bg-blue-700",type:"submit"},"Save and Quit",-1),kt={key:1,class:"text-red-600"},Mt={class:"w-2/3"},Ft=Object(r["f"])("h3",{class:"text-yellow-800"},"Create a new Customer",-1),St={class:"mt-8 mb-6 grid grid-cols-3 gap-8"},At=["for"],Ut=["required","id"],Et=Object(r["f"])("button",{class:"rounded ml-4 px-2 py-1 text-gray-100 bg-yellow-600 hover:bg-yellow-700",type:"submit"},"Create",-1),_t={key:2,class:"fixed overflow-x-hidden overflow-y-auto inset-0 z-20 flex justify-center items-center"},$t={class:"relative w-auto max-w-2xl"},It={class:"bg-white w-full rounded shadow-xl flex flex-col"},qt=Object(r["f"])("div",{class:"py-2 px-2 font-semibold"},"Are you sure to delete this customer?",-1),Lt={class:"py-2 px-2 flex flex-row"},Nt={key:3,class:"absolute inset-0 z-10 opacity-25 bg-black"};function Dt(e,t,s,c,a,o){const l=Object(r["w"])("router-link");return Object(r["r"])(),Object(r["e"])(r["a"],null,[Object(r["F"])(Object(r["f"])("div",Ke,[et,Object(r["F"])(Object(r["f"])("input",{type:"search","onUpdate:modelValue":t[0]||(t[0]=e=>a.search=e),name:"q",class:Object(r["n"])([a.focusMedium,"inset-y-0 left-0 py-2 text-sm rounded-md pl-10 text-gray-800 hover:border-yellow-600"]),placeholder:"Search",autocomplete:"off"},null,2),[[r["B"],a.search]]),Object(r["F"])(Object(r["h"])(l,{"active-class":"text-lg text-yellow-200",class:"ml-8 inset-y-2 whitespace-nowrap hover:text-yellow-800",to:"/customer/editStructure"},{default:Object(r["E"])(()=>[tt]),_:1},512),[[r["C"],a.loaded]]),Object(r["f"])("button",{onClick:t[1]||(t[1]=(...e)=>o.createCustomer&&o.createCustomer(...e)),class:"absolute inset-y-0 right-0 mr-4 bg-yellow-600 text-white rounded-lg shadow-lg px-2 py-2 hover:bg-yellow-700"},ct),Object(r["f"])("span",{class:Object(r["n"])([{invisible:!a.showMessage},"rounded border-l-4 bg-green-400 text-sm text-white px-2 py-3 border-green-800 shadow-xl items-center"])},[Object(r["g"])(Object(r["y"])(a.message),1),Object(r["f"])("i",{onClick:t[2]||(t[2]=e=>a.showMessage=!1),class:"ml-2 far fa-times-circle"})],2),Object(r["F"])(Object(r["f"])("button",at,nt,512),[[r["C"],!a.loaded]])],512),[[r["C"],!a.edit&&!a.create]]),Object(r["F"])(Object(r["f"])("div",{class:"mt-2 mb-4"},Object(r["y"])(o.nbCustomers),513),[[r["C"],a.loaded&&!a.edit&&!a.create]]),Object(r["F"])(Object(r["f"])("div",it,[Object(r["f"])("table",dt,[Object(r["f"])("thead",null,[Object(r["f"])("tr",{class:Object(r["n"])([a.dark,"text-left text-white"])},[Object(r["f"])("th",{class:Object(r["n"])([a.medium,"px-3 py-2"])},[Object(r["F"])(Object(r["f"])("input",{type:"checkbox",onClick:t[3]||(t[3]=e=>o.checkAll()),"onUpdate:modelValue":t[4]||(t[4]=e=>a.isCheckAll=e)},null,512),[[r["A"],a.isCheckAll]])],2),(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["v"])(a.customersMeta,(e,t)=>(Object(r["r"])(),Object(r["e"])("th",{class:"px-3 py-2",key:t},[Object(r["f"])("span",null,Object(r["y"])(e.label),1)]))),128)),Object(r["f"])("th",{colspan:"2",class:Object(r["n"])([a.medium,"px-3 py-2"])},null,2)],2)]),Object(r["f"])("tbody",null,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["v"])(o.filteredCustomers,(s,c)=>(Object(r["r"])(),Object(r["e"])("tr",{key:c},[Object(r["f"])("td",ut,[Object(r["F"])(Object(r["f"])("input",{type:"checkbox",value:s._id,"onUpdate:modelValue":t[5]||(t[5]=e=>a.checkedItems=e),onChange:t[6]||(t[6]=e=>o.updateCheckAll())},null,40,bt),[[r["A"],a.checkedItems]])]),(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["v"])(a.customersMeta,(t,c)=>(Object(r["r"])(),Object(r["e"])("td",{class:"px-3 py-2",key:c,set:e.custData=o.getCustomerDataFromMeta(t,c,s)},Object(r["y"])(e.custData),9,mt))),128)),Object(r["f"])("td",{class:Object(r["n"])([a.light,"px-3 py-2"])},[Object(r["f"])("i",{onClick:e=>o.editCustomer(s),class:"fas fa-edit text-yellow-600",title:"edit"},null,8,ht)],2),Object(r["f"])("td",{class:Object(r["n"])([a.light,"px-3 py-2"])},[Object(r["f"])("i",{onClick:e=>o.showCustomerModal(s),class:"fas fa-trash text-red-600",title:"delete"},null,8,pt)],2)]))),128)),Object(r["f"])("tr",{class:Object(r["n"])([a.dark,"h-1"])},[Object(r["f"])("td",{colspan:Object.values(a.customersMeta).length+3},null,8,Ot)],2)])])],512),[[r["C"],a.loaded&&!a.edit&&!a.create]]),a.updateErrorFlag&&a.edit?(Object(r["r"])(),Object(r["e"])("div",jt,Object(r["y"])(a.updateError),1)):Object(r["d"])("",!0),Object(r["F"])(Object(r["f"])("div",ft,[Object(r["f"])("div",null,[Object(r["f"])("span",{onClick:t[7]||(t[7]=(...e)=>o.cancelEdit&&o.cancelEdit(...e)),class:"text-yellow-800 cursor-pointer hover:font-semibold w-1/3"},"Back to Customers List"),Object(r["f"])("span",{class:Object(r["n"])([{invisible:!a.showMessage},"ml-4 rounded border-l-4 bg-green-400 text-sm text-white px-2 py-3 border-green-800 shadow-xl items-center"])},[Object(r["g"])(Object(r["y"])(a.message),1),Object(r["f"])("i",{onClick:t[8]||(t[8]=e=>a.showMessage=!1),class:"ml-2 far fa-times-circle"})],2)]),Object(r["f"])("form",{name:"update",ref:"updateForm",onSubmit:t[11]||(t[11]=Object(r["G"])(e=>o.updateCust(!0),["prevent"]))},[Object(r["f"])("div",gt,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["v"])(a.customersMeta,(t,s)=>(Object(r["r"])(),Object(r["e"])("div",{class:"",key:s,set:e.custData=o.getCustomerDataFromMeta(t,s,this.customer)},[Object(r["f"])("label",{for:"u_"+s,class:"block left-1 -top-2 text-gray-500 text-sm"},Object(r["y"])(t.label),9,vt),Object(r["f"])("input",{required:t.required,id:"u_"+s,class:Object(r["n"])([a.focusMedium,"py-2 text-sm rounded-md px-2 text-gray-800"]),ref:"u_"+s,value:e.custData},null,10,wt)],8,yt))),128))]),Object(r["f"])("div",xt,[Object(r["f"])("button",{type:"reset",class:"rounded px-2 py-1 text-gray-100 bg-gray-500 hover:bg-gray-600",onClick:t[9]||(t[9]=(...e)=>o.cancelEdit&&o.cancelEdit(...e))},"Cancel"),Object(r["f"])("button",{class:"disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed rounded ml-4 px-2 py-1 text-gray-100 bg-yellow-600 hover:bg-yellow-700",type:"button",onClick:t[10]||(t[10]=e=>o.updateCust(!1))},"Save"),Ct])],544)],512),[[r["C"],a.edit]]),a.createErrorFlag&&a.create?(Object(r["r"])(),Object(r["e"])("div",kt,Object(r["y"])(a.createError),1)):Object(r["d"])("",!0),Object(r["F"])(Object(r["f"])("div",Mt,[Object(r["f"])("form",{name:"create",ref:"create",onSubmit:t[13]||(t[13]=Object(r["G"])((...e)=>o.createCust&&o.createCust(...e),["prevent"]))},[Ft,Object(r["f"])("div",St,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["v"])(a.customersMeta,(e,t)=>(Object(r["r"])(),Object(r["e"])("div",{class:"relative",key:t},[Object(r["f"])("label",{for:t,class:"block left-1 -top-2 text-gray-500 text-sm"},Object(r["y"])(e.label),9,At),Object(r["f"])("input",{required:e.required,id:t,class:Object(r["n"])([a.focusMedium,"py-2 text-sm rounded-md px-2 text-gray-800"]),ref:t},null,10,Ut)]))),128))]),Object(r["f"])("button",{type:"reset",class:"rounded px-2 py-1 text-gray-100 bg-gray-500 hover:bg-gray-600",onClick:t[12]||(t[12]=(...e)=>o.cancelCreate&&o.cancelCreate(...e))},"Cancel"),Et],544)],512),[[r["C"],a.create]]),a.showModal?(Object(r["r"])(),Object(r["e"])("div",_t,[Object(r["f"])("div",$t,[Object(r["f"])("div",It,[Object(r["f"])("div",{class:Object(r["n"])([a.dark,"text-right text-white px-1 py-1"])},[Object(r["f"])("i",{class:"far fa-times-circle",onClick:t[14]||(t[14]=(...e)=>o.cancel&&o.cancel(...e))})],2),qt,Object(r["f"])("div",Lt,[Object(r["f"])("button",{class:"rounded bg-gray-400 text-white px-2 mt-1 py-2 w-1/3 m-auto mb-2",onClick:t[15]||(t[15]=(...e)=>o.cancel&&o.cancel(...e)),type:"button"}," Cancel "),Object(r["f"])("button",{class:"rounded bg-red-600 text-white px-2 mt-1 py-2 w-1/3 m-auto mb-2",onClick:t[16]||(t[16]=e=>o.deleteCust(this.customer._id)),type:"button"}," Delete ")])])])])):Object(r["d"])("",!0),a.showModal?(Object(r["r"])(),Object(r["e"])("div",Nt)):Object(r["d"])("",!0)],64)}const Bt="/api/customers",Tt="/api/customers/meta";class Pt{static async getCustomersMeta(){try{const e=await Te.a.get(Tt);return e.data}catch(e){return console.log("CustomerService getCustomersMeta error : "+e),e}}static async updateCustomersMeta(e){try{const t=await Te.a.put(Tt,e);return t.data}catch(t){return console.log("CustomerService getCustomersMeta error : "+t),t}}static async insertCustomersMeta(e){try{const t=await Te.a.post(Tt,e);return t.data}catch(t){return console.log("CustomerService getCustomersMeta error : "+t),t}}static async getCustomers(){try{const e=await Te.a.get(Bt);return e.data}catch(e){return console.log("CustomerService getCustomers error : "+e),e}}static async getCustomer(e){try{const t=await Te.a.get(`${Bt}/${e}`);return t.data}catch(t){return console.log("CustomerService getCustomers error : "+t),t}}static async insertCustomer(e){return Te.a.post(Bt,e)}static async updateCustomer(e,t){return Te.a.put(`${Bt}/${e}`,t)}static async deleteCustomer(e){return Te.a.delete(`${Bt}/${e}`)}}var Vt=Pt,Ht={name:"Customer",components:{},data(){return{loaded:!1,noChange:!0,promise:[],customers:[],customer:[],checkedItems:[],isCheckAll:!1,light:"bg-yellow-50",focusMedium:"focus:outline-none border border-gray-300 focus:border-yellow-600 focus:ring-0",exemple:"border border-gray-300 bg-white text-gray-900 appearance-none block w-full rounded-md py-3 px-4 focus:border-gray-900 focus:outline-none",medium:"bg-yellow-400",dark:"bg-yellow-600",customersMeta:[],error:"",message:"",createError:"",createErrorFlag:!1,updateError:"",updateErrorFlag:!1,edit:!1,create:!1,search:"",title:"Customers",showModal:!1,showMessage:!1,delay:3e3}},computed:{filteredCustomers(){return this.customers.filter(e=>this.testCustomer(e))},nbCustomers(){return this.filteredCustomers.length>1?this.filteredCustomers.length+" records":this.filteredCustomers.length+" record"}},methods:{async createCust(){var e={};for(var t in this.createErrorFlag=!1,this.createError="",this.customersMeta){var s=this.$refs[t].value,r=this.customersMeta[t].levelup,c=r.split(".");""===r?e[t]=s:(1===c.length&&(e[c[0]]||(e[c[0]]={}),e[c[0]][t]=s),2===c.length&&(e[c[0]][c[1]]||(e[c[0]][c[1]]={}),e[c[0]][c[1]][t]=s),3===c.length&&(e[c[0]][c[1]][c[2]]||(e[c[0]][c[1]][c[2]]={}),e[c[0]][c[1]][c[2]][t]=s),4===c.length&&(e[c[0]][c[1]][c[2]][c[3]]||(e[c[0]][c[1]][c[2]][c[3]]={}),e[c[0]][c[1]][c[2]][c[3]][t]=s),5===c.length&&(e[c[0]][c[1]][c[2]][c[3]][c[4]]||(e[c[0]][c[1]][c[2]][c[3][c[4]]]={}),e[c[0]][c[1]][c[2]][c[3]][c[4]][t]=s)),t.includes("email")&&(this.validateEmail(s)||(this.createErrorFlag=!0,this.createError="Email invalid!"))}this.createErrorFlag||(this.$refs.create.reset(),await Vt.insertCustomer(e),this.message="Customer created successfully!",this.customers=await Vt.getCustomers(),this.showMessage=!0,this.create=!1,this.hideAfterDelay())},validateEmail(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},async updateCust(e){var t={};for(var s in this.updateError="",this.updateErrorFlag=!1,this.customersMeta){var r=this.$refs["u_"+s].value,c=this.customersMeta[s].levelup,a=c.split(".");""===c?t[s]=r:(1===a.length&&(t[a[0]]||(t[a[0]]={}),t[a[0]][s]=r),2===a.length&&(t[a[0]][a[1]]||(t[a[0]][a[1]]={}),t[a[0]][a[1]][s]=r),3===a.length&&(t[a[0]][a[1]][a[2]]||(t[a[0]][a[1]][a[2]]={}),t[a[0]][a[1]][a[2]][s]=r),4===a.length&&(t[a[0]][a[1]][a[2]][a[3]]||(t[a[0]][a[1]][a[2]][a[3]]={}),t[a[0]][a[1]][a[2]][a[3]][s]=r),5===a.length&&(t[a[0]][a[1]][a[2]][a[3]][a[4]]||(t[a[0]][a[1]][a[2]][a[3][a[4]]]={}),t[a[0]][a[1]][a[2]][a[3]][a[4]][s]=r)),s.includes("email")&&(this.validateEmail(r)||(this.updateErrorFlag=!0,this.updateError="Email invalid!"))}if(!this.updateErrorFlag){const s=this.customer._id;await Vt.updateCustomer(s,t),e?(this.customers=await Vt.getCustomers(),this.edit=!1):this.customer=await Vt.getCustomer(s),this.message="Customer updated successfully!",this.showMessage=!0,this.hideAfterDelay()}},hideAfterDelay(){setTimeout(()=>{this.hideMessage()},this.delay)},signalChange(){this.noChange=!1},getCustomerDataFromMeta(e,t,s){const r=e.levelup;var c=r.split(".");if(""===r)return s[t];for(var a=0;a<c.length;a++){if(!s)return"";s=s[c[a]]}return s?s[t]:""},hideMessage(){this.showMessage=!1},editCustomer(e){this.edit||(this.edit=!0,this.customer=e)},createCustomer(){this.edit=!1,this.create=!0},showCustomerModal(e){this.customer=e,this.showModal=!0},cancel(){this.showModal=!1},async cancelEdit(){this.customers=await Vt.getCustomers(),this.edit=!1,this.showMessage=!1,this.message=""},cancelCreate(){this.$refs.create.reset(),this.createErrorFlag=!1,this.createError="",this.create=!1},async deleteCust(){await Vt.deleteCustomer(this.customer._id),this.showModal=!1,this.customers=await Vt.getCustomers()},checkAll:function(){if(this.isCheckAll=!this.isCheckAll,this.checkedItems=[],this.isCheckAll)for(var e in this.customers)this.checkedItems.push(this.customers[e]._id)},updateCheckAll:function(){this.checkedItems.length===this.customers.length?this.isCheckAll=!0:this.isCheckAll=!1},testCustomer(e){if(""===this.search)return!0;var t=this.customersMeta,s=!1;for(const c in t){var r=this.getCustomerDataFromMeta(t[c],c,e);r&&r.toLowerCase().includes(this.search.toLowerCase())&&(s=!0)}return s}},mounted(){try{this.promise=Vt.getCustomers(),this.customersMeta=Vt.getCustomersMeta(),this.promise.then(e=>{this.customers=e}),this.customersMeta.then(e=>{this.customersMeta=e,this.loaded=!0})}catch(e){this.error=e.message,console.log("Customer.vue Error : "+this.error)}}};Ht.render=Dt;var zt=Ht;const Jt={class:"rounded-t-md shadow-lg overflow-hidden"},Rt=Object(r["f"])("th",{class:"px-3 py-2"},"Field",-1),Wt=Object(r["f"])("th",{class:"px-3 py-2"},"Type",-1),Zt=Object(r["f"])("th",{class:"px-3 py-2"},"Label",-1),Gt=Object(r["f"])("th",{class:"px-3 py-2"},"Level",-1),Qt=Object(r["f"])("th",{class:"px-3 py-2"},"Required?",-1),Xt=[Rt,Wt,Zt,Gt,Qt],Yt={class:"px-3 py-2"},Kt={class:"px-3 py-2"},es=["selected"],ts={class:"px-3 py-2"},ss=["value"],rs={class:"px-3 py-2"},cs=["value"],as={class:"px-3 py-2"},os=["onClick"],ls=Object(r["f"])("td",{colspan:5},null,-1),ns=[ls],is={key:0},ds={class:"rounded-t-md shadow-lg overflow-hidden"},us={class:"px-3 py-2"},bs={class:"px-3 py-2"},ms={ref:"type",value:"String"},hs={class:"px-3 py-2"},ps={class:"px-3 py-2"},Os=["aria-checked"],js={class:"items-stretch flex"},fs={key:2,class:"items-stretch flex"},gs=Object(r["f"])("button",{class:"rounded bg-red-600 text-white px-2 mx-4 mt-1 py-2 mb-2",type:"submit"}," Save and Quit ",-1);function ys(e,t,s,c,a,o){return Object(r["r"])(),Object(r["e"])(r["a"],null,[Object(r["f"])("div",null,[Object(r["g"])(" Edit Customer Structure "+Object(r["y"])(a.loaded)+" ",1),Object(r["f"])("span",{class:Object(r["n"])([{invisible:!a.showMessage},"rounded border-l-4 bg-green-400 text-sm text-white px-2 py-3 border-green-800 shadow-xl items-center"])},[Object(r["g"])(Object(r["y"])(a.message),1),Object(r["f"])("i",{onClick:t[0]||(t[0]=e=>a.showMessage=!1),class:"ml-2 far fa-times-circle"})],2)]),Object(r["f"])("form",{onSubmit:t[7]||(t[7]=Object(r["G"])(e=>o.updateCustStructure(!0),["prevent"]))},[Object(r["F"])(Object(r["f"])("div",null,[Object(r["f"])("table",Jt,[Object(r["f"])("thead",null,[Object(r["f"])("tr",{class:Object(r["n"])([a.dark,"text-left text-white"])},Xt,2)]),Object(r["f"])("tbody",null,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["v"])(a.customersMeta,(e,t)=>(Object(r["r"])(),Object(r["e"])("tr",{key:t},[Object(r["f"])("td",Yt,Object(r["y"])(t),1),Object(r["f"])("td",Kt,[Object(r["f"])("select",{ref:t+"_type"},[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["v"])(a.types,t=>(Object(r["r"])(),Object(r["e"])("option",{selected:t==e.type,key:t},Object(r["y"])(t),9,es))),128))],512)]),Object(r["f"])("td",ts,[Object(r["f"])("input",{required:"",class:Object(r["n"])([a.focusMedium,"py-2 text-sm rounded-md px-2 text-gray-800"]),ref:t+"_label",value:e.label},null,10,ss)]),Object(r["f"])("td",rs,[Object(r["f"])("input",{class:Object(r["n"])([a.focusMedium,"py-2 text-sm rounded-md px-2 text-gray-800"]),ref:t+"_levelup",value:e.levelup},null,10,cs)]),Object(r["f"])("td",as,[Object(r["f"])("div",{class:Object(r["n"])(["flex items-center bg-gray-300 rounded-full w-14 h-7 p-1 duration-300",{"bg-yellow-600":a.required[t]}]),onClick:e=>o.change(t)},[Object(r["f"])("div",{class:Object(r["n"])(["h-5 w-5 rounded-full shadow-md transform duration-300 bg-white",{"translate-x-7":a.required[t]}])},null,2)],10,os)])]))),128)),Object(r["f"])("tr",{class:Object(r["n"])([a.dark,"h-1"])},ns,2)])])],512),[[r["C"],a.loaded]]),a.createField?(Object(r["r"])(),Object(r["e"])("div",is,[Object(r["f"])("table",ds,[Object(r["f"])("tbody",null,[Object(r["f"])("tr",null,[Object(r["f"])("td",us,[Object(r["f"])("input",{placeholder:"Field",type:"text",required:"",class:Object(r["n"])([a.focusMedium,"py-2 text-sm rounded-md px-2 text-gray-800"]),ref:"field"},null,2)]),Object(r["f"])("td",bs,[Object(r["f"])("select",ms,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["v"])(a.types,e=>(Object(r["r"])(),Object(r["e"])("option",{key:e},Object(r["y"])(e),1))),128))],512)]),Object(r["f"])("td",hs,[Object(r["f"])("input",{placeholder:"Label",type:"text",class:Object(r["n"])([a.focusMedium,"py-2 text-sm rounded-md px-2 text-gray-800"]),ref:"label"},null,2)]),Object(r["f"])("td",ps,[Object(r["f"])("input",{placeholder:"Level",type:"text",class:Object(r["n"])([a.focusMedium,"py-2 text-sm rounded-md px-2 text-gray-800"]),ref:"levelup"},null,2)]),Object(r["f"])("td",null,[Object(r["f"])("div",{class:Object(r["n"])(["flex items-center bg-gray-300 rounded-full w-14 h-7 p-1 duration-300",{"bg-yellow-600":a.mandatory}]),"aria-checked":a.mandatory.toString(),onClick:t[1]||(t[1]=(...e)=>o.changeMandatory&&o.changeMandatory(...e))},[Object(r["f"])("div",{class:Object(r["n"])(["h-5 w-5 rounded-full shadow-md transform duration-300 bg-white",{"translate-x-7":a.mandatory}])},null,2)],10,Os)])])])])])):Object(r["d"])("",!0),a.createField?Object(r["d"])("",!0):(Object(r["r"])(),Object(r["e"])("button",{key:1,class:"rounded bg-yellow-600 text-white px-2 mt-1 py-2 mb-2",onClick:t[2]||(t[2]=(...e)=>o.toggleField&&o.toggleField(...e)),type:"button"},"+Add")),Object(r["f"])("div",js,[a.createField?(Object(r["r"])(),Object(r["e"])("button",{key:0,class:"rounded bg-gray-400 text-white px-2 mx-4 mt-1 py-2 mb-2",onClick:t[3]||(t[3]=(...e)=>o.toggleField&&o.toggleField(...e)),type:"button"},"Cancel")):Object(r["d"])("",!0),a.createField?(Object(r["r"])(),Object(r["e"])("button",{key:1,class:"rounded bg-yellow-600 text-white px-2 mt-1 py-2 mb-2",onClick:t[4]||(t[4]=(...e)=>o.addField&&o.addField(...e)),type:"button"},"Create")):Object(r["d"])("",!0)]),a.createField?Object(r["d"])("",!0):(Object(r["r"])(),Object(r["e"])("div",fs,[Object(r["f"])("button",{class:"rounded bg-gray-400 text-white px-2 mx-4 mt-1 py-2 mb-2",onClick:t[5]||(t[5]=(...e)=>o.cancel&&o.cancel(...e)),type:"button"}," Cancel "),Object(r["f"])("button",{class:"rounded bg-yellow-600 text-white px-2 mx-4 mt-1 py-2 mb-2",onClick:t[6]||(t[6]=e=>o.updateCustStructure(!1)),type:"button"}," Save "),gs]))],32)],64)}var vs={name:"CustomerStructure",components:{},data(){return{loaded:!1,required:{},mandatory:!1,showMessage:!1,createField:!1,message:"",delay:3e3,medium:"bg-yellow-400",dark:"bg-yellow-600",focusMedium:"focus:outline-none border border-gray-300 focus:border-yellow-600 focus:ring-0",customersMeta:[],types:["Boolean","Decimal128","Double","Date","Int32","Int64","String","Timestamp"]}},methods:{hideAfterDelay(){setTimeout(()=>{this.showMessage=!1},this.delay)},cancel(){this.$router.push("/customer")},change(e){this.required[e]=!this.required[e]},toggleField(){this.createField=!this.createField},changeMandatory(){this.mandatory=!this.mandatory},async addField(){var e=this.$refs.field.value,t={[e]:{type:this.$refs.type.value,label:this.$refs.label.value,levelup:this.$refs.levelup.value,required:JSON.parse(this.mandatory)}};await Vt.insertCustomersMeta(t),this.customersMeta=await Vt.getCustomersMeta(),this.createField=!1,this.$refs.type.value="",this.$refs.label.value="",this.$refs.levelup.value="",this.mandatory=!1},async updateCustStructure(e){var t={fields:{}},s=this.customersMeta;for(const r in s)t.fields[r]={type:this.$refs[r+"_type"].value,label:this.$refs[r+"_label"].value,levelup:this.$refs[r+"_levelup"].value,required:JSON.parse(this.required[r])};console.log(t),await Vt.updateCustomersMeta(t),this.message="Customer Structure updated successfully!",this.showMessage=!0,this.hideAfterDelay(),e&&this.$router.push("/customer")}},mounted(){try{this.customersMeta=Vt.getCustomersMeta(),this.customersMeta.then(e=>{this.customersMeta=e,this.loaded=!0;for(const t in e)this.required[t]=e[t].required})}catch(e){this.error=e.message,console.log("CustomerStructure.vue Error : "+this.error)}}};vs.render=ys;var ws=vs;const xs=[{path:"/",name:"Home",component:V,linkActiveClass:"active"},{path:"/forgot",name:"Forgot",component:Ge,linkActiveClass:"active"},{path:"/createAccount",name:"Account",component:Ye,linkActiveClass:"active"},{path:"/customer",name:"Customer",component:zt,linkActiveClass:"active"},{path:"/login",name:"Login",component:Re,linkActiveClass:"active"},{path:"/customer/editStructure",name:"CustomerStructure",component:ws,linkActiveClass:"active"}],Cs=Object(L["a"])({history:Object(L["b"])("/"),routes:xs});var ks=Cs;s("ba8c");const Ms={displayCustomers:e=>e.customersMeta},Fs={},Ss={};var As={namespaced:!0,state(){async function e(){var e=await Vt.getCustomersMeta();return e}return{customersMeta:e()}},getters:Ms,actions:Fs,mutations:Ss};const Us=s("bc3a"),Es=Us.create({baseURL:"http://localhost:5000/api/"});let _s=localStorage.getItem("status"),$s=localStorage.getItem("user");if($s)try{$s=JSON.parse($s)}catch(qs){$s={_id:-1,accessToken:""}}else $s={_id:-1,accessToken:""};var Is=Object(w["a"])({modules:{customersMeta:As},state:{status:_s,user:$s},mutations:{setStatus:(e,t)=>{e.status=t,localStorage.setItem("status",t)},logUser:(e,t)=>{e.user=t,localStorage.setItem("user",JSON.stringify(t))},logout:e=>{e.user={_id:-1,token:""},localStorage.removeItem("user"),localStorage.setItem("status",""),e.status=""}},actions:{login:({commit:e},t)=>{e("setStatus","loading");let s=[],r=0;Es.get("users").then(c=>{if(s=c.data,s&&(r=s.length),!(t.username&&r>0))return e("setStatus","error_login"),null;for(let e=0;e<s.length;e++)t.username==s[e].username&&(t.user=s[e],e=s.length);return new Promise((s,r)=>{Es.post("/login",t).then(t=>{e("setStatus","loggedIn"),e("logUser",t.data),s(t),ks.push("/")}).catch(t=>{console.log("index.js Store -- catch Promise"),e("setStatus","error_login"),r(t)})})}).catch(t=>(console.log("index.js Store -- catch login error : ",t),e("setStatus","error_login"),null))},myInfos:e=>new Promise((t,s)=>{Es.post("/users/me",e).then(e=>{t(e.data)},e=>{s(e)})})}});Object(r["c"])(q).use(ks).use(Is).mount("#app")},ba8c:function(e,t,s){}});
//# sourceMappingURL=app.ab70e789.js.map